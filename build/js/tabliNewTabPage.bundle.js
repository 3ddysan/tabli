webpackJsonp([2],{0:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){var t=performance.now(),n=chrome.extension.getBackgroundPage(),s=n.storeRef,a=n.savedStore,r=document.getElementById("windowList-region"),o=l.createElement(w["default"],{storeRef:s,initialWinStore:a}),i=(c.render(o,r),performance.now());console.log("full render complete. render time: (",i-t," ms)"),u.syncChromeWindows((0,f.logWrap)(function(n){var r=n(a),o=r.setCurrentWindow(e);s.setValue(o);var i=performance.now();console.log("syncChromeWindows and update complete: ",i-t," ms"),document.getElementById("searchBox").focus()}))}function o(){chrome.windows.getCurrent(null,function(e){r(e.id)})}function i(){window.onload=o}var d=n(8),l=a(d),p=n(183),c=a(p),h=n(6),u=a(h),f=n(7),v=n(193),w=s(v);i()},193:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){var t=chrome.runtime.connect({name:"popup"});t.postMessage(e),t.onMessage.addListener(function(e){console.log("Got response message: ",e)})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),i=a(o),d=n(6),l=a(d),p=n(167),c=a(p),h=n(161),u=n(168),f=s(u),v=n(178),w=s(v),m=n(194),b=s(m),S=n(171),W=a(S),I=i.createClass({displayName:"NewTabPage",storeAsState:function(e){var t=e.getAll(),n=t.sort(W.windowCmp);return{winStore:e,sortedWindows:n}},getInitialState:function(){var e=this.storeAsState(this.props.initialWinStore);return e.saveModalIsOpen=!1,e.revertModalIsOpen=!1,e.revertTabWindow=null,e.searchStr="",e.searchRE=null,e},handleSearchInput:function(e){var t=e.trim(),n=null;t.length>0&&(n=new RegExp(t,"i")),console.log("search input: '"+t+"'"),this.setState({searchStr:t,searchRE:n})},openSaveModal:function(e){var t=e.title;this.setState({saveModalIsOpen:!0,saveInitialTitle:t,saveTabWindow:e})},closeSaveModal:function(){this.setState({saveModalIsOpen:!1})},openRevertModal:function(e){this.setState({revertModalIsOpen:!0,revertTabWindow:e.tabWindow})},closeRevertModal:function(){this.setState({revertModalIsOpen:!1,revertTabWindow:null})},doSave:function(e){var t=this.props.storeRef,n=t.getValue().folderId;l.manageWindow(n,this.state.saveTabWindow,e,(0,h.refUpdater)(t)),this.closeSaveModal()},doRevert:function(e){var t=(0,h.refUpdater)(this.props.storeRef);l.revertWindow(this.state.revertTabWindow,t),this.closeRevertModal()},renderSaveModal:function(){var e=null;return this.state.saveModalIsOpen&&(e=i.createElement(w["default"],{initialTitle:this.state.saveInitialTitle,tabWindow:this.state.saveTabWindow,onClose:this.closeSaveModal,onSubmit:this.doSave,appComponent:this})),e},renderRevertModal:function(){var e=null;return this.state.revertModalIsOpen&&(e=i.createElement(f["default"],{tabWindow:this.state.revertTabWindow,onClose:this.closeRevertModal,onSubmit:this.doRevert,appComponent:this})),e},render:function(){var e;try{var t=this.renderSaveModal(),n=this.renderRevertModal(),s=c.filterTabWindows(this.state.sortedWindows,this.state.searchRE);e=i.createElement("div",null,i.createElement(b["default"],{onSearchInput:this.handleSearchInput,winStore:this.state.winStore,storeUpdateHandler:(0,h.refUpdater)(this.props.storeRef),filteredWindows:s,appComponent:this,searchStr:this.state.searchStr,searchRE:this.state.searchRE}),t,n)}catch(a){throw console.error("App Component: caught exception during render: "),console.error(a.stack),a}return e},componentWillMount:function(){var e=this;if(!this.props.noListener){var t=this.props.storeRef,n=t.addViewListener(function(){console.log("TabliPopup: viewListener: updating store from storeRef"),e.setState(e.storeAsState(t.getValue()))});r({listenerId:n})}}});t["default"]=I},194:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){var n=e.length>0?t.itemMatches.count():t.tabWindow.tabItems.count();return n}function o(e,t,n){if(0===t.length){var s=e.tabWindow,a=s.tabItems.get(n);return a}var r=e.itemMatches.get(n);return r.tabItem}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),d=a(i),l=n(169),p=s(l),c=n(171),h=a(c),u=n(6),f=a(u),v=n(180),w=s(v),m=n(195),b=s(m),S=n(187),W=(s(S),d.createClass({displayName:"SelectableTabPage",getInitialState:function(){return{selectedWindowIndex:0,selectedTabIndex:0}},handlePrevSelection:function(e){if(0!==this.props.filteredWindows.length){var t=this.props.filteredWindows[this.state.selectedWindowIndex];if(t.tabWindow.open&&this.state.selectedTabIndex>0&&!e)this.setState({selectedTabIndex:this.state.selectedTabIndex-1});else if(this.state.selectedWindowIndex>0){var n=this.state.selectedWindowIndex-1,s=this.props.filteredWindows[n],a=this.props.searchStr.length>0?s.itemMatches.count():s.tabWindow.tabItems.count();this.setState({selectedWindowIndex:n,selectedTabIndex:a-1})}}},handleNextSelection:function(e){if(0!==this.props.filteredWindows.length){var t=this.props.filteredWindows[this.state.selectedWindowIndex],n=this.props.searchStr.length>0?t.itemMatches.count():t.tabWindow.tabItems.count();t.tabWindow.open&&this.state.selectedTabIndex+1<n&&!e?this.setState({selectedTabIndex:this.state.selectedTabIndex+1}):this.state.selectedWindowIndex+1<this.props.filteredWindows.length&&this.setState({selectedWindowIndex:this.state.selectedWindowIndex+1,selectedTabIndex:0})}},handleSelectionEnter:function(){if(0!==this.props.filteredWindows.length){var e=this.props.filteredWindows[this.state.selectedWindowIndex],t=o(e,this.props.searchStr,this.state.selectedTabIndex);console.log("opening: ",t.toJS()),f.activateTab(e.tabWindow,t,this.state.selectedTabIndex,this.props.storeUpdateHandler)}},componentWillReceiveProps:function(e){var t=this.state.selectedWindowIndex,n=e.filteredWindows;if(t>=n.length)if(0===n.length)this.setState({selectedWindowIndex:0,selectedTabIndex:-1}),console.log("resetting indices");else{var s=n[n.length-1];this.setState({selectedWindowIndex:n.length-1,selectedTabIndex:r(this.props.searchStr,s)-1})}else{var a=n[t],o=Math.min(this.state.selectedTabIndex,r(this.props.searchStr,a)-1);this.setState({selectedTabIndex:o})}},render:function(){var e=this.props.winStore,t=e.countOpenTabs(),n=e.countOpenWindows(),s=e.countSavedWindows(),a="Tabs: "+t+" Open. Windows: "+n+" Open, "+s+" Saved.";return d.createElement("div",null,d.createElement("div",{className:"container"},d.createElement("div",{className:"row"},d.createElement("div",{className:"com-sm-1"}),d.createElement("div",{className:"col-sm-10"},d.createElement("img",{src:"../images/popout-icon-1.png"}),d.createElement(w["default"],{onSearchInput:this.props.onSearchInput,onSearchUp:this.handlePrevSelection,onSearchDown:this.handleNextSelection,onSearchEnter:this.handleSelectionEnter}))),d.createElement("div",{className:"container-fluid"},d.createElement(b["default"],{winStore:this.props.winStore,storeUpdateHandler:this.props.storeUpdateHandler,filteredWindows:this.props.filteredWindows,appComponent:this.props.appComponent,searchStr:this.props.searchStr,searchRE:this.props.searchRE,selectedWindowIndex:this.state.selectedWindowIndex,selectedTabIndex:this.state.selectedTabIndex}))),d.createElement("div",{style:p["default"].tabPageFooter},d.createElement("span",{style:h.merge(p["default"].closed,p["default"].summarySpan)},a)))}}));t["default"]=W},195:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=a(r),i=n(169),d=s(i),l=n(196),p=s(l),c=n(187),h=s(c),u=o.createClass({displayName:"TabTileList",render:function(){for(var e=[],t=[],n=[],s=this.props.filteredWindows,a=0;a<s.length;a++){var r=s[a],i=r.tabWindow,l="tabWindow"+a,c=i.open,u=i.focused,f=a===this.props.selectedWindowIndex,v=f?this.props.selectedTabIndex:-1,w=o.createElement(p["default"],{winStore:this.props.winStore,storeUpdateHandler:this.props.storeUpdateHandler,filteredTabWindow:r,key:l,searchStr:this.props.searchStr,searchRE:this.props.searchRE,isSelected:f,selectedTabIndex:v,appComponent:this.props.appComponent,initialExpandedState:!0});u?e=w:c?t.push(w):n.push(w)}return o.createElement("div",null,o.createElement(h["default"],{title:"Open Windows"},o.createElement("div",{style:d["default"].tabTileContainer},e,t)),o.createElement(h["default"],{title:"Closed, Saved Windows"},o.createElement("div",{style:d["default"].tabTileContainer},n)))}});t["default"]=u},196:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=a(r),i=n(183),d=a(i),l=n(4),p=a(l),c=n(169),h=s(c),u=n(171),f=a(u),v=n(6),w=a(v),m=n(177),b=s(m),S=n(184),W=s(S),I=n(186),g=s(I),x=o.createClass({displayName:"FilteredTabTile",mixins:[b["default"]],getInitialState:function(){return{expanded:this.props.initialExpandedState}},componentWillReceiveProps:function(e){e.isSelected&&!this.props.isSelected&&d.findDOMNode(this.refs.windowDiv).scrollIntoViewIfNeeded()},handleOpen:function(){console.log("handleOpen",this,this.props),w.openWindow(this.props.filteredTabWindow.tabWindow,this.props.storeUpdateHandler)},handleClose:function(e){w.closeWindow(this.props.filteredTabWindow.tabWindow,this.props.storeUpdateHandler)},handleRevert:function(e){var t=this.props.appComponent;t.openRevertModal(this.props.filteredTabWindow)},getExpandedState:function(){return null===this.state.expanded?this.props.filteredTabWindow.tabWindow.open:this.state.expanded},renderTabItems:function(e,t){for(var n=[],s=0;s<t.count();s++){var a="tabItem-"+s,r=s===this.props.selectedTabIndex,i=o.createElement(g["default"],{winStore:this.props.winStore,storeUpdateHandler:this.props.storeUpdateHandler,tabWindow:e,tab:t.get(s),key:a,tabIndex:s,isSelected:r,appComponent:this.props.appComponent});n.push(i)}var d=this.getExpandedState(),l=d?h["default"].expandablePanelContentOpen:h["default"].expandablePanelContentClosed,p=f.merge(h["default"].tabList,l,h["default"].tileTabContainer);return o.createElement("div",{style:p},n)},handleExpand:function(e){this.setState({expanded:e})},render:function(){var e,t=this.props.filteredTabWindow,n=t.tabWindow;e=0===this.props.searchStr.length?n.tabItems:t.itemMatches.map(function(e){return e.tabItem});var s=this.getExpandedState(),a=null;a=s?this.renderTabItems(n,e):this.renderTabItems(n,p.Seq());var r=o.createElement(W["default"],{winStore:this.props.winStore,storeUpdateHandler:this.props.storeUpdateHandler,tabWindow:n,expanded:s,onExpand:this.handleExpand,onOpen:this.handleOpen,onRevert:this.handleRevert,onClose:this.handleClose,appComponent:this.props.appComponent}),i=this.props.isSelected?h["default"].tabWindowSelected:null,d=f.merge(h["default"].tabWindow,h["default"].expandablePanel,i,h["default"].tabWindowTile);return o.createElement("div",{ref:"windowDiv",style:d,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},r,a)}});t["default"]=x}});