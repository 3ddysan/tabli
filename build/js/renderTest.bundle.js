webpackJsonp([3],[function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function a(e){var n=e.tabItems.map(function(e){return new v.TabItem(e)});e.tabItems=f.Seq(n);var t=new v.TabWindow(e);return t}function i(e){var n=e.allWindows,t=n.map(a),o=new b["default"],r=chrome.extension.getBackgroundPage(),i=r.renderTestSavedHTML,d=o.registerTabWindows(t);console.log("Created mockWinStore and registered test windows"),console.log("mock winStore: ",d.toJS());var u=performance.now(),s=document.getElementById("windowList-region");if(g&&g.start(),i){console.log("Got saved HTML, setting..."),s.innerHTML=i;var c=performance.now();console.log("time to set initial HTML: ",c-u)}var w=l.createElement(y["default"],{winStore:d,noListener:!0});l.render(w,s);var f=performance.now();g&&g.stop(),console.log("initial render complete. render time: (",f-u," ms)"),g&&(console.log("inclusive:"),g.printInclusive(),console.log("exclusive:"),g.printExclusive(),console.log("wasted:"),g.printWasted()),console.log("After rendering, parentNode: ",s);var p=l.renderToString(w);r.renderTestSavedHTML=p}function d(e){var n=new XMLHttpRequest;n.open("GET",m,!0),n.onload=function(){if(n.status>=200&&n.status<400){var t=JSON.parse(n.responseText);e(t)}else console.error("request failed, error: ",n.status,n)},n.send()}function u(){d(i)}function s(){window.onload=u}var c=t(166),l=r(c),w=t(4),f=r(w),p=t(5),v=r(p),h=t(1),b=o(h),k=t(165),y=o(k),g=c.addons.Perf,m="testData/winSnap.json";s()},function(e,n,t){"use strict";function o(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function i(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var d=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}();Object.defineProperty(n,"__esModule",{value:!0});var u=t(2),s=o(u),c=t(4),l=o(c),w=t(5),f=o(w),p=function(e){function n(){return r(this,n),a(this,Object.getPrototypeOf(n).apply(this,arguments))}return i(n,e),d(n,[{key:"registerTabWindow",value:function(e){var n=e.open?this.windowIdMap.set(e.openWindowId,e):this.windowIdMap,t=e.saved?this.bookmarkIdMap.set(e.savedFolderId,e):this.bookmarkIdMap;return this.set("windowIdMap",n).set("bookmarkIdMap",t)}},{key:"registerTabWindows",value:function(e){return s.reduce(e,function(e,n){return e.registerTabWindow(n)},this)}},{key:"handleTabWindowClosed",value:function(e){var n=this.windowIdMap["delete"](e.openWindowId),t=f.removeOpenWindowState(e);return this.set("windowIdMap",n).registerTabWindow(t)}},{key:"handleTabClosed",value:function(e,n){var t=f.closeTab(e,n);return this.registerTabWindow(t)}},{key:"handleTabSaved",value:function(e,n,t){var o=f.saveTab(e,n,t);return this.registerTabWindow(o)}},{key:"handleTabUnsaved",value:function(e,n){var t=f.unsaveTab(e,n);return this.registerTabWindow(t)}},{key:"attachChromeWindow",value:function(e,n){var t=this.windowIdMap.get(n.id),o=t?this.handleTabWindowClosed(t):this,r=f.updateWindow(e,n);return console.log("attachChromeWindow: attachedTabWindow: ",r.toJS()),o.registerTabWindow(r)}},{key:"syncChromeWindow",value:function(e){var n=this.windowIdMap.get(e.id),t=n?f.updateWindow(n,e):f.makeChromeTabWindow(e);return this.registerTabWindow(t)}},{key:"syncWindowList",value:function(e){var n=this.getOpen(),t=s.pluck(e,"id"),o=new Set(t),r=s.filter(n,function(e){return!o.has(e.openWindowId)}),a=s.reduce(r,function(e,n){return e.handleTabWindowClosed(n)},this);return s.reduce(e,function(e,n){return e.syncChromeWindow(n)},a)}},{key:"setCurrentWindow",value:function(e){var n=this.getTabWindowByChromeId(e);if(!n)return console.log("setCurrentWindow: window id ",e,"not found"),this;var t=n.set("focused",!0);return this.registerTabWindow(t)}},{key:"removeBookmarkIdMapEntry",value:function(e){return this.set("bookmarkIdMap",this.bookmarkIdMap["delete"](e.savedFolderId))}},{key:"unmanageWindow",value:function(e){var n=this.removeBookmarkIdMapEntry(e),t=f.removeSavedWindowState(e);return n.registerTabWindow(t)}},{key:"attachBookmarkFolder",value:function(e,n){var t=f.makeFolderTabWindow(e),o=f.updateWindow(t,n);return this.registerTabWindow(o)}},{key:"getOpen",value:function(){var e=this.windowIdMap.toIndexedSeq().toArray();return e}},{key:"getAll",value:function(){var e=this.getOpen(),n=this.bookmarkIdMap.toIndexedSeq().filter(function(e){return!e.open}).toArray();return e.concat(n)}},{key:"getTabWindowByChromeId",value:function(e){return this.windowIdMap.get(e)}},{key:"countOpenWindows",value:function(){return this.windowIdMap.count()}},{key:"countSavedWindows",value:function(){return this.bookmarkIdMap.count()}},{key:"countOpenTabs",value:function(){return this.windowIdMap.reduce(function(e,n){return e+n.openTabCount},0)}}]),n}(l.Record({windowIdMap:l.Map(),bookmarkIdMap:l.Map(),folderId:-1,archiveFolderId:-1}));n["default"]=p}]);