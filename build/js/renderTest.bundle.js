webpackJsonp([3],[function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function i(e){var n=e.tabItems.map(function(e){return new p.TabItem(e)});e.tabItems=w.Seq(n);var t=new p.TabWindow(e);return t}function a(e){var n=e.allWindows,t=n.map(i),o=new b["default"],r=chrome.extension.getBackgroundPage(),a=r.renderTestSavedHTML,u=o.registerTabWindows(t);console.log("Created mockWinStore and registered test windows"),console.log("mock winStore: ",u.toJS());var d=performance.now(),s=document.getElementById("windowList-region");if(k&&k.start(),a){console.log("Got saved HTML, setting..."),s.innerHTML=a;var c=performance.now();console.log("time to set initial HTML: ",c-d)}var f=l.createElement(g["default"],{winStore:u,noListener:!0});l.render(f,s);var w=performance.now();k&&k.stop(),console.log("initial render complete. render time: (",w-d," ms)"),k&&(console.log("inclusive:"),k.printInclusive(),console.log("exclusive:"),k.printExclusive(),console.log("wasted:"),k.printWasted()),console.log("After rendering, parentNode: ",s);var v=l.renderToString(f);r.renderTestSavedHTML=v}function u(e){var n=new XMLHttpRequest;n.open("GET",W,!0),n.onload=function(){if(n.status>=200&&n.status<400){var t=JSON.parse(n.responseText);e(t)}else console.error("request failed, error: ",n.status,n)},n.send()}function d(){u(a)}function s(){window.onload=d}var c=t(159),l=r(c),f=t(4),w=r(f),v=t(5),p=r(v),h=t(1),b=o(h),m=t(2),y=(r(m),t(7),t(209)),g=o(y),k=(c.addons.PureRenderMixin,c.addons.Perf),W="testData/winSnap.json";s()},function(e,n,t){"use strict";function o(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),u=function(e,n,t){for(var o=!0;o;){var r=e,i=n,a=t;u=s=d=void 0,o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var d=u.get;return void 0===d?void 0:d.call(a)}var s=Object.getPrototypeOf(r);if(null===s)return void 0;e=s,n=i,t=a,o=!0}},d=t(2),s=o(d),c=t(4),l=o(c),f=t(5),w=o(f),v=function(e){function n(){r(this,n),u(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return i(n,e),a(n,[{key:"registerTabWindow",value:function(e){var n=e.open?this.windowIdMap.set(e.openWindowId,e):this.windowIdMap,t=e.saved?this.bookmarkIdMap.set(e.savedFolderId,e):this.bookmarkIdMap;return this.set("windowIdMap",n).set("bookmarkIdMap",t)}},{key:"registerTabWindows",value:function(e){return s.reduce(e,function(e,n){return e.registerTabWindow(n)},this)}},{key:"handleTabWindowClosed",value:function(e){var n=this.windowIdMap["delete"](e.openWindowId),t=w.removeOpenWindowState(e);return this.set("windowIdMap",n).registerTabWindow(t)}},{key:"handleTabClosed",value:function(e,n){var t=w.closeTab(e,n);return this.registerTabWindow(t)}},{key:"handleTabSaved",value:function(e,n,t){var o=w.saveTab(e,n,t);return this.registerTabWindow(o)}},{key:"handleTabUnsaved",value:function(e,n){var t=w.unsaveTab(e,n);return this.registerTabWindow(t)}},{key:"attachChromeWindow",value:function(e,n){var t=this.windowIdMap.get(n.id),o=t?this.handleTabWindowClosed(t):this,r=w.updateWindow(e,n);return console.log("attachChromeWindow: attachedTabWindow: ",r.toJS()),o.registerTabWindow(r)}},{key:"syncChromeWindow",value:function(e){var n=this.windowIdMap.get(e.id),t=n?w.updateWindow(n,e):w.makeChromeTabWindow(e);return this.registerTabWindow(t)}},{key:"syncWindowList",value:function(e){var n=this.getOpen(),t=s.pluck(e,"id"),o=new Set(t),r=s.filter(n,function(e){return!o.has(e.openWindowId)}),i=s.reduce(r,function(e,n){return e.handleTabWindowClosed(n)},this);return s.reduce(e,function(e,n){return e.syncChromeWindow(n)},i)}},{key:"setCurrentWindow",value:function(e){var n=this.getTabWindowByChromeId(e);if(!n)return void console.log("setCurrentWindow: window id ",e,"not found");var t=n.set("focused",!0);return this.registerTabWindow(t)}},{key:"removeBookmarkIdMapEntry",value:function(e){return this.set("bookmarkIdMap",this.bookmarkIdMap["delete"](e.savedFolderId))}},{key:"unmanageWindow",value:function(e){var n=this.removeBookmarkIdMapEntry(e),t=w.removeSavedWindowState(e);return n.registerTabWindow(t)}},{key:"attachBookmarkFolder",value:function(e,n){var t=w.makeFolderTabWindow(e),o=w.updateWindow(t,n);return this.registerTabWindow(o)}},{key:"getOpen",value:function(){var e=this.windowIdMap.toIndexedSeq().toArray();return e}},{key:"getAll",value:function(){var e=this.getOpen(),n=this.bookmarkIdMap.toIndexedSeq().filter(function(e){return!e.open}).toArray();return e.concat(n)}},{key:"getTabWindowByChromeId",value:function(e){return this.windowIdMap.get(e)}},{key:"countOpenWindows",value:function(){return this.windowIdMap.count()}},{key:"countSavedWindows",value:function(){return this.bookmarkIdMap.count()}},{key:"countOpenTabs",value:function(){return this.windowIdMap.reduce(function(e,n){return e+n.openTabCount},0)}}]),n}(l.Record({windowIdMap:l.Map(),bookmarkIdMap:l.Map(),folderId:-1,archiveFolderId:-1}));n["default"]=v,e.exports=n["default"]}]);